### Technical Overview: Cadence

The `/Users/phaedrus/Development/cadence` directory contains the source code, build infrastructure, and design specifications for Cadence, a minimalist macOS Pomodoro application. The project is engineered as a lightweight, native utility that prioritizes opinionated defaults over user configuration, adhering strictly to the 25/5/15-minute Pomodoro cycle.

#### Architecture and Purpose
Cadence is architected as a Swift Package Manager (SPM) executable that is transformed into a standard macOS application bundle via custom shell scripts. The application utilizes a reactive state-driven architecture, leveraging the Swift **Observation** framework to synchronize a central logic engine with a SwiftUI-based user interface. It bridges AppKit’s low-level system APIs (for window and menu bar management) with SwiftUI’s declarative layout system.

The project is structured into three primary functional areas:
1.  **Core Application (`/Sources`):** Implements the Pomodoro state machine, the floating utility window, and the menu bar interface.
2.  **Automation (`/scripts`):** Handles the compilation and assembly of the `.app` bundle, including binary signing and property list injection.
3.  **Validation (`/Tests`):** Provides a suite of unit tests for the temporal and state-transition logic.

#### Key File Roles
*   **Package.swift**: The manifest defining the project as a macOS 14+ executable. It manages the dependency graph and defines the `CadenceApp` and `CadenceTests` targets.
*   **spec.md / README.md**: These files serve as the technical and philosophical blueprint. They define the immutable timing constants (Focus: 25m, Short Break: 5m, Long Break: 15m) and the expected user experience (floating window, no Dock icon).
*   **TimerState.swift**: The central `@Observable` model. It encapsulates the countdown logic, session tracking, and the state machine governing transitions between focus and break phases.
*   **WindowManager.swift**: Manages an `NSWindow` instance configured as a titlebar-less utility panel. It ensures the UI floats above other applications and persists its screen position across launches.
*   **bundle.sh**: A critical deployment script that compiles the SPM target and uses linker flags (`-Xlinker -sectcreate`) to embed the `Info.plist` into the binary, ensuring macOS recognizes the executable as a bundled application.
*   **TimerStateTests.swift**: Validates the Pomodoro lifecycle, specifically testing the logic that triggers a long break after the fourth focus session.

#### Dependencies and Technical Constraints
*   **Frameworks**: The project relies on **SwiftUI** for rendering, **AppKit** for `NSStatusItem` and `NSWindow` management, and the **UserNotifications** framework for system alerts.
*   **Build System Interop**: Because the project uses SPM for an executable rather than a standard Xcode project, it relies on the `/scripts` directory to manually construct the `Contents/MacOS` and `Contents/Resources` directory hierarchy required for a functional macOS bundle.
*   **Activation Policy**: The application is configured as an `LSUIElement` (Agent), meaning it runs without a Dock icon and is primarily accessed via the macOS menu bar.
*   **State Synchronization**: A 0.5-second polling mechanism is implemented in the `AppDelegate` to update the procedurally generated menu bar icon, as the `NSStatusItem` does not natively support direct observation of the Swift `Observation` framework.
*   **Notification Requirements**: Successful delivery of phase-end alerts depends on the presence of a valid `Bundle Identifier` and user-granted permissions via `UNUserNotificationCenter`.